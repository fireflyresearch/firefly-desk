Analyze the following enterprise context to discover business processes.
Pay special attention to API endpoints â€” they reveal how systems interact and what business operations they support.

{% if systems %}
## Available Systems and Endpoints ({{ systems | length }} systems)

IMPORTANT: Analyze these systems and their endpoints carefully to identify business processes.
Look for CRUD patterns, cross-system data flows, and sequential endpoint chains.

{% for system in systems %}
### {{ system.name }} (ID: {{ system.id }})
{{ system.description }}
Base URL: {{ system.base_url }}
Status: {{ system.status }}
{% if system.tags %}Tags: {{ system.tags | join(', ') }}{% endif %}

{% if system.endpoints %}
API Endpoints ({{ system.endpoints | length }}):
{% for ep in system.endpoints %}
  - {{ ep.name }} (ID: {{ ep.id }}): {{ ep.description }}
    {{ ep.method }} {{ ep.path }}
    Business purpose: {{ ep.when_to_use }}
    Risk: {{ ep.risk_level }}
{% endfor %}
{% endif %}

{% endfor %}
{% else %}
No external systems are currently registered in the catalog.
{% endif %}

{% if entities %}
## Knowledge Graph Entities and Relations

{% for entity in entities %}
- {{ entity.name }} (type: {{ entity.entity_type }}, confidence: {{ entity.confidence }})
  {% if entity.properties %}Properties: {{ entity.properties }}{% endif %}

{% endfor %}

{% if relations %}
### Relations
{% for rel in relations %}
- {{ rel.source_id }} --[{{ rel.relation_type }}]--> {{ rel.target_id }}
  {% if rel.properties %}Properties: {{ rel.properties }}{% endif %}

{% endfor %}
{% endif %}
{% else %}
No knowledge graph entities are currently available.
{% endif %}

{% if documents %}
## Knowledge Base Documents

{% for doc in documents %}
### {{ doc.title }} (type: {{ doc.document_type }})
{% if doc.tags %}Tags: {{ doc.tags | join(', ') }}{% endif %}

{{ doc.content[:3000] }}{% if doc.content | length > 3000 %}...{% endif %}

{% endfor %}
{% else %}
No knowledge base documents are currently available.
{% endif %}

Based on the above context, identify ALL business processes including:
1. Processes evidenced by API endpoints and system integrations (CRUD workflows, cross-system data flows, sequential operations)
2. Processes described in documents (SOPs, procedures, workflows)
3. Processes inferred from knowledge graph relations

For each process, include specific system_id and endpoint_id references where applicable. Return the result as structured JSON. Keep descriptions concise (1-2 sentences) to avoid response truncation.
