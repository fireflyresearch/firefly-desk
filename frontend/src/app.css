@import 'tailwindcss';
@plugin '@tailwindcss/typography';
@import '@fontsource-variable/plus-jakarta-sans';
@import '@fontsource/jetbrains-mono/400.css';

@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@theme {
    --font-sans: 'Plus Jakarta Sans Variable', system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', monospace;

    /* Light theme (default) */
    --color-surface: #fafaf9;
    --color-surface-secondary: #f5f5f4;
    --color-surface-elevated: #ffffff;
    --color-surface-hover: #e7e5e4;
    --color-border: #d6d3d1;
    --color-text-primary: #1c1917;
    --color-text-secondary: #78716c;
    --color-accent: #2563eb;
    --color-accent-hover: #1d4ed8;
    --color-danger: #dc2626;
    --color-warning: #f59e0b;
    --color-success: #16a34a;
    --color-ember: #f59e0b;
    --color-ember-glow: rgba(245, 158, 11, 0.08);
}

[data-theme="dark"] {
    --color-surface: #0c0a09;
    --color-surface-secondary: #1c1917;
    --color-surface-elevated: #292524;
    --color-surface-hover: #292524;
    --color-border: #44403c;
    --color-text-primary: #fafaf9;
    --color-text-secondary: #a8a29e;
    --color-accent: #3b82f6;
    --color-accent-hover: #60a5fa;
    --color-danger: #ef4444;
    --color-warning: #f59e0b;
    --color-success: #22c55e;
    --color-ember: #f59e0b;
    --color-ember-glow: rgba(245, 158, 11, 0.06);
}

@layer base {
    body {
        font-family: var(--font-sans);
        color: var(--color-text-primary);
        background-color: var(--color-surface);
        transition: background-color 0.2s ease, color 0.2s ease;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* Subtle noise texture overlay for depth */
    body::before {
        content: '';
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 9999;
        opacity: 0.015;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        background-repeat: repeat;
        background-size: 256px 256px;
    }

    /* Focus-visible ring with ember glow */
    *:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
        box-shadow: 0 0 0 4px var(--color-ember-glow);
    }

    /* Smooth scrollbar styling */
    ::-webkit-scrollbar {
        width: 6px;
    }
    ::-webkit-scrollbar-track {
        background: transparent;
    }
    ::-webkit-scrollbar-thumb {
        background: var(--color-border);
        border-radius: 3px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: var(--color-text-secondary);
    }
}

/* Button micro-interaction */
@layer utilities {
    .btn-hover {
        transition: all 150ms ease;
    }
    .btn-hover:hover {
        transform: translateY(-1px);
    }
    .btn-hover:active {
        transform: translateY(0);
    }
}

/* Typography prose overrides for dark mode */
[data-theme="dark"] .prose {
    --tw-prose-body: var(--color-text-primary);
    --tw-prose-headings: var(--color-text-primary);
    --tw-prose-links: var(--color-accent);
    --tw-prose-code: var(--color-text-primary);
    --tw-prose-bold: var(--color-text-primary);
    --tw-prose-quotes: var(--color-text-secondary);
    --tw-prose-quote-borders: var(--color-border);
    --tw-prose-hr: var(--color-border);
}
